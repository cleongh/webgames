<!DOCTYPE html><html lang="es"><head><meta charset="utf-8"><title>Publicar un proyecto en la web</title><meta name="author" content="Carlos León"><style>.underline{text-decoration:underline}</style><link rel="stylesheet" href="tooling.reveal.e38fa0d8.css"><link rel="stylesheet" href="tooling.reveal.a866bf8d.css" id="theme"><link rel="stylesheet" href="tooling.reveal.c1a625de.css"><link rel="stylesheet" href="tooling.reveal.fdb16a0d.css"></head><body> <div class="reveal"> <div class="slides"> <section id="sec-title-slide"> <h1 class="title">Publicar un proyecto en la web</h1><h2 class="author">Carlos León</h2><h2 class="email"><a href="mailto:cleon@ucm.es">cleon@ucm.es</a></h2> </section> <section> <section id="slide-cómo-empaquetar"> <h2 id="cómo-empaquetar">Cómo empaquetar</h2> </section> <section> <p> Hay que alojar el proyecto en un sitio web </p> <p> Todos, a través del <a href="https://docs.github.com/en/pages/getting-started-with-github-pages">servicio de páginas públicas en GitHub</a> podéis simplemente hacer un commit del proyecto y servir la URL </p> </section> <section> <p> Alternativas: </p> <ol> <li>Sólo tenéis que crear una rama <code>main</code> en un repositorio, y tener ahí el archivo <code>index.html</code> apropiado (los servidores web usan el documento <code>index.html</code> como el servido por defecto)</li> <li>Tener nuestra versión de producción en una carpeta <code>docs</code> de <code>main</code> (tenéis que configurarlo en "Settings")</li> <li>Tener nuestra versión de producción en una rama <code>gh-pages</code> (que podéis/deberíais crear como <a href="https://jiafulow.github.io/blog/2020/07/09/create-gh-pages-branch-in-existing-repo/">orphan branch</a>)</li> </ol> </section> <section> <p> Una ventaja de hacerlo desde <code>main</code> es que no hay que hacer nada más que desarrollar y hacer <code>push</code>, y servimos los mismos archivos de desarrollo </p> <p> En general <i>esto no es idóneo</i>, pero acelera y simplifica el proceso </p> </section> <section> <p> Una ventaja de hacerlo desde <code>docs</code> o desde <code>gh-pages</code> es que, si el repositorio es privado, sólo se servirá/será público lo de esa carpeta </p> </section> <section> </section> <section id="slide-rutas"> <h3 id="rutas">Rutas</h3> </section> <section> <div class="html" id="org2eea46a"> <p> &lt;!&#x2013; Recordemos que Phaser no usa recursos cargados desde local, hace falta hacerlo a través de un servidor web </p> <p> &#x2014; &#x2013;&gt; </p> </div> <p> Tened cuidado con los recursos: </p> <ul> <li>Referenciadlos con <b>rutas relativas</b> a vuestros <code>.html</code> y <code>.js</code> (<code>imgs/imagen.png</code>), en vez de <b>rutas absolutas</b> (<code>http://mi.ruta.cambiante/imgs/imagen.png</code>)</li> <li>Aseguraos de que están cargados antes de iniciar su uso</li> <li>Aseguraos de que están siempre disponibles</li> </ul> </section> <section> </section> <section id="slide-página-en-la-que-incluir-el-proyecto"> <h3 id="página-en-la-que-incluir-el-proyecto">Página en la que incluir el proyecto</h3> <p> El archivo <code>index.html</code> tiene que ser una página presentable y "bonita" </p> </section> <section> <p> Tiene que tener el título del proyecto, un resumen del GDD (una versión en HTML), enlaces pertinentes (como, por ejemplo, al código en <code>GitHub</code>), instrucciones y cualquier información adicional relevante </p> </section> <section> <p> Además, hay que poner la licencia del mismo e información de la asignatura </p> </section> </section> <section> <section id="slide-desarrollo-y-despliegue"> <h2 id="desarrollo-y-despliegue">Desarrollo y despliegue</h2> </section> <section> <p> No tenéis que desarrollar con la máquina de GitHub, sino en local </p> <p> Hacer <code>push</code> para probar es lento y es una carga innecesaria </p> </section> <section> <p> Siempre: </p> <ul> <li>Abrir vuestro editor favorito con los archivos html y js</li> <li>Arrancar un servidor con <code>npx live-server</code> o similar</li> <li>Abrir el navegador con la URL del servidor local</li> <li>Abrir las herramientas de desarrollo del navegador</li> </ul> </section> <section> <blockquote> <p> Revisad los recursos del Campus: </p> <ul> <li>Depurar con Google Chrome</li> <li>Depurar JavaScript en el navegador</li> </ul> </blockquote> </section> <section> <p> Cuando funcione: </p> <ul> <li>Hacer <code>push</code> y publicar <code>main</code></li> <li>Publicar sólo carpeta <code>docs</code> o rama <code>gh-pages</code> y copiar a esta carpeta/rama sólo cuando haya material mejorado</li> </ul> <div class="html" id="org2a1c28c"> <p> &lt;!&#x2013; </p> <p> &#x2014; </p> <p> Cuando se crea un proyecto, desplegar o construir siempre es una tarea importante </p> <p> Pero si es manual, es tediosa y propensa a errores </p> <p> &#x2014; </p> <p> Por eso se suelen crear guiones de construcción que nos sirven para automatizar el proceso: </p> <p> ```bash </p> <p> mkdir -p docs cp *.html docs/ cp -r assets/ docs/ ``` </p> <p> &#x2014; </p> <p> Un script sencillo funciona cuando hay pocos archivos, pero cuando el proyecto crece, sólo queremos modificar aquello que cambia </p> <p> Para eso tenemos `make` y sus `Makefiles` </p> <p> &#x2014; </p> <p> ```Makefile all: docs/index.html docs/game.js </p> <p> docs/%.html: %.html cp $&lt; $@ </p> <p> docs/%.js: %.js cp $&lt; $@ </p> <p> clean: rm -rf docs/ </p> <p> .PHONY: all clean ``` </p> <p> &#x2014; </p> <p> Así, podemos construir: </p> <p> ```bash make # o make all ``` </p> <p> O borrar todo: </p> <p> ```bash make clean ``` </p> <p> &#x2014; </p> <p> De hecho, podemos hacer una regla para que los archivos se copien siempre que cambien: </p> <p> ```Makefile watch: all watchman-make -p *.html *.js &#x2013;run make </p> <p> .PHONY: watch ``` </p> <p> &#x2014; </p> <p> Para ejecutar un `Makefile` hace falta ejecutar (y tener instalado) `make` en el directorio en el que está el `Makefile` </p> <p> ```bash -&gt; ls . .. Makefile -&gt; make watch ``` </p> <p> &#x2014; </p> <p> Esto hace que publicar en la carpeta `docs` sea mucho más sencillo &#x2013;&gt; </p> </div> </section> </section> </div> </div> <script src="tooling.reveal.ffb33b1a.js"></script> <script src="tooling.reveal.f05d24be.js"></script> <script src="tooling.reveal.1feea775.js"></script> <script src="tooling.reveal.d2982244.js"></script> <script>Reveal.initialize({controls:!0,progress:!0,history:!0,center:!0,slideNumber:"c",rollingLinks:!1,keyboard:!0,mouseWheel:!1,fragmentInURL:!1,hashOneBasedIndex:!1,pdfSeparateFragments:!0,overview:!0,transition:"none",transitionSpeed:"default",plugins:[RevealSearch,RevealHighlight,RevealZoom],dependencies:[]});</script> </body></html>